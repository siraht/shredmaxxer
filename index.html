<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#070913" />
  <title>Shredmaxx ‚Äî Solar Log</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="style.css" />
  <link rel="preload" href="assets/fonts/SpaceGrotesk.woff2" as="font" type="font/woff2" crossorigin />
  <link rel="preload" href="assets/fonts/JetBrainsMono.woff2" as="font" type="font/woff2" crossorigin />
</head>

<body>
  <svg class="svg-sprite" aria-hidden="true" focusable="false"
    style="position:absolute;width:0;height:0;overflow:hidden;">
    <symbol id="i-sun" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="4" fill="currentColor" />
      <path d="M12 2v3M12 19v3M4.2 4.2l2.1 2.1M17.7 17.7l2.1 2.1M2 12h3M19 12h3M4.2 19.8l2.1-2.1M17.7 6.3l2.1-2.1"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" />
    </symbol>
    <symbol id="i-wifi" viewBox="0 0 24 24">
      <path d="M4.5 10.5a10 10 0 0 1 15 0" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" />
      <path d="M7.5 13.5a6 6 0 0 1 9 0" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" />
      <path d="M10.5 16.5a2 2 0 0 1 3 0" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" />
      <circle cx="12" cy="19" r="1" fill="currentColor" />
    </symbol>
    <symbol id="i-battery" viewBox="0 0 24 24">
      <rect x="3" y="8" width="16" height="8" rx="2" ry="2" stroke="currentColor" stroke-width="2" fill="none" />
      <rect x="20" y="10" width="2" height="4" rx="1" fill="currentColor" />
    </symbol>
    <symbol id="i-home" viewBox="0 0 24 24">
      <path d="M4 11l8-7 8 7v8a1 1 0 0 1-1 1h-4v-6h-6v6H5a1 1 0 0 1-1-1v-8z" stroke="currentColor" stroke-width="2"
        fill="none" stroke-linejoin="round" />
    </symbol>
    <symbol id="i-history" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="2" fill="none" />
      <path d="M12 8v5l3 2" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
        stroke-linejoin="round" />
    </symbol>
    <symbol id="i-chart" viewBox="0 0 24 24">
      <path d="M4 19h16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" />
      <path d="M7 16v-5M12 19v-8M17 19v-11" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" />
    </symbol>
    <symbol id="i-settings" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none" />
      <path d="M12 2v3M12 19v3M4.5 4.5l2.1 2.1M17.4 17.4l2.1 2.1M2 12h3M19 12h3M4.5 19.5l2.1-2.1M17.4 6.6l2.1-2.1"
        stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" />
    </symbol>
    <symbol id="i-arrow-left" viewBox="0 0 24 24">
      <path d="M15 6l-6 6 6 6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
        stroke-linejoin="round" />
    </symbol>
    <symbol id="i-edit" viewBox="0 0 24 24">
      <path d="M4 20h4l10-10-4-4-10 10v4z" stroke="currentColor" stroke-width="2" fill="none" stroke-linejoin="round" />
      <path d="M13 6l4 4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" />
    </symbol>
  </svg>

  <div id="app" class="app-shell mockup-shell" data-route="today">
    <div class="sky-noise" aria-hidden="true"></div>
    <div class="privacy-blur hidden" id="privacyBlurOverlay" aria-hidden="true"></div>
    <div class="app-lock hidden" id="appLockOverlay" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="app-lock-card">
        <div class="app-lock-title">App locked</div>
        <div class="app-lock-sub">Enter your passcode to continue.</div>
        <input class="field-input" id="appLockInput" type="password" inputmode="numeric" autocomplete="current-password"
          placeholder="Passcode" />
        <button class="btn" id="appLockSubmit" type="button">Unlock</button>
        <div class="tiny muted" id="appLockMessage"></div>
      </div>
    </div>
    <div class="scrim hidden" id="scrim" data-region="scrim" aria-hidden="true"></div>

    <main class="mockup-main" data-region="main">
      <!-- TODAY / HOME (mockup: ui/mockups/home.html) -->
      <section class="view home-screen" id="viewToday" data-view="today">
        <header class="home-topbar">
          <div class="home-brand">
            <div class="home-brand-left">
              <span class="brand-icon" aria-hidden="true">‚òâ</span>
              <div class="brand-copy">
                <div class="brand-title">SOLAR LOG <span class="brand-version">v4.0</span></div>
              </div>
            </div>
            <div class="home-status">
              <span class="status-pill" id="syncStatus">SYNCED</span>
              <span class="status-pill status-muted">
                <svg class="status-glyph" aria-hidden="true">
                  <use href="#i-wifi"></use>
                </svg>
                NET:ON
              </span>
              <span class="status-pill status-muted">
                <svg class="status-glyph" aria-hidden="true">
                  <use href="#i-battery"></use>
                </svg>
                98%
              </span>
            </div>
          </div>
        </header>

        <div class="home-body">
          <section class="home-hero">
            <div class="arc-shell">
              <svg class="solar" id="solarSvg" viewBox="0 0 1000 260" preserveAspectRatio="none" aria-hidden="true">
                <defs>
                  <filter id="softGlow" x="-40%" y="-40%" width="180%" height="180%">
                    <feGaussianBlur stdDeviation="6" result="blur" />
                    <feColorMatrix type="matrix" values="
                      1 0 0 0 0
                      0 1 0 0 0
                      0 0 1 0 0
                      0 0 0 0.9 0" />
                    <feMerge>
                      <feMergeNode in="blur" />
                      <feMergeNode in="SourceGraphic" />
                    </feMerge>
                  </filter>
                  <linearGradient id="arcGrad" x1="0" x2="1">
                    <stop offset="0%" stop-color="var(--sunrise)" />
                    <stop offset="50%" stop-color="var(--sun)" />
                    <stop offset="100%" stop-color="var(--sunset)" />
                  </linearGradient>
                </defs>

                <path id="sunArc" d="" class="sun-arc" />
                <circle id="sunGlow" cx="0" cy="0" r="26" class="sun-glow" />
                <circle id="sunDot" cx="0" cy="0" r="12" class="sun-dot" />
                <text id="sunTime" x="0" y="0" class="sun-time"> </text>
              </svg>
              <div class="arc-grid" aria-hidden="true"></div>
              <div class="arc-outline" aria-hidden="true"></div>
              <div class="arc-dawn">DAWN<br><span>06:00</span></div>
              <div class="arc-dusk">DUSK<br><span>18:00</span></div>
              <div class="arc-labels">
                <div class="arc-label">
                  <div class="arc-title" id="phaseLabel">‚Äî</div>
                  <div class="arc-sub" id="phaseSub">‚Äî</div>
                </div>
                <button class="focus-pill" id="toggleFocus" type="button" aria-label="Toggle timeline focus">
                  <span class="focus-dot" aria-hidden="true"></span>
                  <span id="focusLabel">Full day</span>
                </button>
              </div>
            </div>

            <div class="time-row">
              <div class="time-block">
                <span class="time-label">CURRENT_TIME</span>
                <span class="time-value" id="currentTime">--:--</span>
                <span class="time-zone" id="currentTz">‚Äî</span>
              </div>
              <div class="time-controls">
                <button class="icon-btn" id="prevDay" type="button" aria-label="Previous day">‚Äπ</button>
                <input class="date" id="datePicker" type="date" />
                <button class="icon-btn" id="nextDay" type="button" aria-label="Next day">‚Ä∫</button>
              </div>
            </div>
          </section>

          <section class="segment-deck">
            <div class="segment-head">
              <div class="segment-title">SEGMENTS</div>
              <button class="btn ghost small" id="copyYesterday" type="button">Copy yesterday</button>
            </div>
            <div class="timeline" id="timeline">
              <div class="timeline-rail" aria-hidden="true">
                <span></span><span></span><span></span>
              </div>
              <div class="timeline-track" id="timelineTrack" aria-label="Day timeline"></div>
              <div class="now-marker" id="nowMarker" aria-hidden="true">
                <div class="now-line"></div>
                <div class="now-cap"></div>
              </div>
              <div class="fog" id="futureFog" aria-hidden="true"></div>
            </div>
          </section>

          <section class="rituals">
            <button class="ritual" id="movedBeforeLunch" type="button" aria-pressed="false">
              <span class="ritual-kicker">Ritual</span>
              <span class="ritual-title">üèÉ Move pre-lunch</span>
              <span class="ritual-sub" id="moveSub">‚Äî</span>
            </button>

            <button class="ritual" id="trained" type="button" aria-pressed="false">
              <span class="ritual-kicker">Output</span>
              <span class="ritual-title">üí™ Training</span>
              <span class="ritual-sub" id="trainSub">‚Äî</span>
            </button>

            <button class="ritual" id="highFatDay" type="button" aria-pressed="false">
              <span class="ritual-kicker">Cycle</span>
              <span class="ritual-title">ü•ë High-fat day</span>
              <span class="ritual-sub" id="fatDaySub">‚Äî</span>
            </button>
          </section>

          <section class="signals">
            <div class="signal">
              <div class="signal-label">Energy</div>
              <div class="mini-scale" data-scale="energy" id="energyScale"></div>
            </div>
            <div class="signal">
              <div class="signal-label">Mood</div>
              <div class="mini-scale" data-scale="mood" id="moodScale"></div>
            </div>
            <div class="signal">
              <div class="signal-label">Cravings</div>
              <div class="mini-scale" data-scale="cravings" id="cravingsScale"></div>
            </div>
          </section>

          <div class="nudge-card" id="todayNudge" hidden>
            <div class="nudge-head">
              <div class="nudge-kicker">Nudge</div>
              <button class="btn ghost tinybtn" id="todayNudgeDismiss" type="button">Dismiss</button>
            </div>
            <div class="nudge-title" id="todayNudgeTitle"></div>
            <div class="nudge-message" id="todayNudgeMessage"></div>
            <div class="nudge-reason" id="todayNudgeReason"></div>
          </div>

          <div class="supplements" id="supplementsPanel" hidden>
            <div class="supplements-head">
              <div class="section-title">Supplements</div>
              <div class="tiny muted" id="supplementsModeLabel">Off</div>
            </div>
            <div class="chips" id="supplementsChips"></div>
            <div class="notes supplements-notes">
              <textarea id="supplementsNotes" class="notes-box" placeholder="Supplements notes (optional)"></textarea>
            </div>
          </div>

          <div class="notes" id="notesBlock">
            <textarea id="notes" class="notes-box" placeholder="Daily summary (energy, mood, output)..."></textarea>
          </div>
          <div class="redaction-banner" id="redactionBanner" hidden>
            Notes hidden (redaction on)
          </div>
        </div>
        <button class="fab-edit" id="fabEdit" type="button" aria-label="Edit current segment">
          <svg class="fab-icon" aria-hidden="true">
            <use href="#i-edit"></use>
          </svg>
        </button>
      </section>

      <!-- ARCHIVE / HISTORY (mockup: ui/mockups/archive.html) -->
      <section class="view archive-screen hidden" id="viewHistory" data-view="history">
        <div class="archive-shell">
          <header class="archive-header">
            <div class="archive-header-row">
              <button class="icon-btn" type="button" data-action="route" data-route="today" aria-label="Back to Today">
                <svg class="tab-glyph" aria-hidden="true">
                  <use href="#i-arrow-left"></use>
                </svg>
              </button>
              <div class="archive-status">SYS: ONLINE</div>
              <button class="icon-btn" id="tabSettingsAlt" type="button" data-action="route" data-route="settings"
                aria-label="Settings">
                <svg class="tab-glyph" aria-hidden="true">
                  <use href="#i-settings"></use>
                </svg>
              </button>
            </div>
            <div class="archive-title">Mission Log <span>Archive</span></div>
            <div class="archive-divider" aria-hidden="true"></div>
          </header>

          <main class="archive-body">
            <div class="archive-filters">
              <div class="field">
                <label class="field-label" for="historySearch">Search</label>
                <input class="field-input" id="historySearch" type="search" placeholder="Search roster items or tags" />
                <div class="field-help">Matches items, aliases, or flags (ex: seed_oil).</div>
              </div>
              <div class="segmented small" id="historyFilters" aria-label="History filters">
                <button class="seg-btn" type="button" data-filter="collision">Collision</button>
                <button class="seg-btn" type="button" data-filter="seedOil">Seed oil</button>
                <button class="seg-btn" type="button" data-filter="highFat">High-fat</button>
                <button class="seg-btn" type="button" data-filter="notes">Has notes</button>
              </div>
            </div>

            <div class="archive-list" id="historyList"></div>
            <div class="row cent mt">
              <button class="btn ghost small" id="historyLoadMore" type="button" hidden>Load more</button>
            </div>

            <details class="archive-panel">
              <summary>Backup + Import</summary>
              <div class="panel-body">
                <div class="row gap wrap">
                  <button class="btn" id="exportBtn" type="button" data-mode="plain">Export JSON</button>
                  <button class="btn ghost" id="exportAltBtn" type="button" data-mode="encrypted">Export
                    encrypted</button>
                  <button class="btn ghost" id="exportCsvBtn" type="button">Export CSV</button>
                  <label class="btn ghost" for="importFile">Import</label>
                  <input id="importFile" type="file" accept="application/json" hidden />
                </div>
                <div class="row gap mt">
                  <div class="segmented small" id="importMode">
                    <button class="seg-btn" type="button" data-value="merge">Merge (default)</button>
                    <button class="seg-btn" type="button" data-value="replace">Replace</button>
                  </div>
                  <button class="btn" id="importApply" type="button" disabled>Apply import</button>
                </div>
                <div class="tiny muted" id="importStatus"></div>
              </div>
            </details>

            <details class="archive-panel">
              <summary>Diagnostics</summary>
              <div class="panel-body">
                <div class="safe-mode-banner hidden" id="safeModeBanner" role="status" aria-live="polite">
                  <div>
                    <div class="safe-mode-title">Safe Mode active</div>
                    <div class="safe-mode-sub">Editing is disabled. Export a recovery payload or restore a snapshot.
                    </div>
                  </div>
                  <button class="btn ghost" id="safeModeExport" type="button">Export recovery</button>
                </div>
                <div class="diagnostics-grid">
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Storage mode:</span>
                    <span class="diagnostic-value" id="diagStorageMode">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Persistent storage:</span>
                    <span class="diagnostic-value" id="diagPersistStatus">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Sync status:</span>
                    <span class="diagnostic-value" id="diagSyncStatus">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Outbox depth:</span>
                    <span class="diagnostic-value" id="diagOutboxDepth">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Conflict count:</span>
                    <span class="diagnostic-value" id="diagConflictCount">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Last sync error:</span>
                    <span class="diagnostic-value tiny" id="diagLastError">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Safe mode:</span>
                    <span class="diagnostic-value" id="diagSafeMode">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">DST clamp:</span>
                    <span class="diagnostic-value" id="diagDstClamp">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Schema version:</span>
                    <span class="diagnostic-value" id="diagSchemaVersion">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">App version:</span>
                    <span class="diagnostic-value" id="diagAppVersion">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Install ID:</span>
                    <span class="diagnostic-value tiny" id="diagInstallId">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Snapshots:</span>
                    <span class="diagnostic-value" id="diagSnapshotCount">‚Äî</span>
                  </div>
                  <div class="diagnostic-row">
                    <span class="diagnostic-label">Missing roster IDs:</span>
                    <span class="diagnostic-value" id="diagMissingItems">‚Äî</span>
                  </div>
                </div>
                <div class="row gap mt">
                  <button class="btn ghost" id="snapshotCreate" type="button">Create snapshot now</button>
                </div>
                <div class="snapshot-list" id="snapshotList"></div>

                <label class="check mt">
                  <input type="checkbox" id="perfLogToggle" />
                  Perf logging (audit log)
                </label>

                <div class="section-title mt">Audit log</div>
                <div class="row gap">
                  <select class="field-input" id="auditFilter">
                    <option value="all">All events</option>
                    <option value="info">Info</option>
                    <option value="warn">Warnings</option>
                    <option value="error">Errors</option>
                  </select>
                </div>
                <div class="snapshot-list" id="auditLogList"></div>
              </div>
            </details>
          </main>
        </div>
      </section>

      <!-- REVIEW / METRICS (mockup: ui/mockups/metrics.html) -->
      <section class="view metrics-screen hidden" id="viewReview" data-view="review">
        <div class="metrics-shell">
          <header class="metrics-header">
            <button class="icon-btn" type="button" data-action="route" data-route="today" aria-label="Back to Today">
              <svg class="tab-glyph" aria-hidden="true">
                <use href="#i-arrow-left"></use>
              </svg>
            </button>
            <div class="metrics-title">
              <div class="metrics-heading">INTEL</div>
              <div class="metrics-sub" id="reviewRange">‚Äî</div>
              <div class="metrics-week-nav">
                <button class="btn ghost tinybtn" id="reviewPrevWeek" type="button">Prev week</button>
                <button class="btn ghost tinybtn" id="reviewTodayWeek" type="button">This week</button>
                <button class="btn ghost tinybtn" id="reviewNextWeek" type="button">Next week</button>
              </div>
              <div class="metrics-dots" aria-hidden="true">
                <span></span><span></span><span></span>
              </div>
            </div>
            <button class="icon-btn" type="button" data-action="route" data-route="settings" aria-label="Settings">
              <svg class="tab-glyph" aria-hidden="true">
                <use href="#i-settings"></use>
              </svg>
            </button>
          </header>

          <main class="metrics-body">
            <section class="metrics-panel">
              <div class="metrics-row">
                <h3>WEEKLY MATRIX</h3>
                <span class="status-pill">SYNCED</span>
              </div>
              <div class="review-summary" id="reviewSummary"></div>
              <div class="tiny muted" id="reviewPhase"></div>
              <div class="review-matrix" id="coverageMatrix"></div>
            </section>

            <section class="metrics-panel">
              <div class="metrics-row">
                <h3>ROTATION_QUEUE</h3>
              </div>
              <div class="review-picks" id="rotationPicks"></div>
            </section>

            <section class="metrics-panel">
              <div class="metrics-row">
                <h3>DIAGNOSTICS</h3>
                <div class="panel-dots" aria-hidden="true">
                  <span></span><span></span><span></span>
                </div>
              </div>
              <div class="review-issues" id="reviewIssues"></div>
              <div class="review-correlations" id="reviewCorrelations"></div>
              <div class="review-insights" id="reviewInsights"></div>
            </section>
          </main>
        </div>
      </section>

      <!-- SETTINGS (non-mockup) -->
      <section class="view settings-screen hidden" id="viewSettings" data-view="settings">
        <div class="panel">
          <div class="section-title">Time model</div>

          <div class="grid2">
            <div class="field">
              <label class="field-label" for="setDayStart">Day starts</label>
              <input class="field-input" id="setDayStart" type="time" />
              <div class="field-help">Left edge of your timeline.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setDayEnd">Day ends</label>
              <input class="field-input" id="setDayEnd" type="time" />
              <div class="field-help">Right edge of your timeline.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setFtnEnd">FTN ends</label>
              <input class="field-input" id="setFtnEnd" type="time" />
              <div class="field-help">Default noon, adjustable.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setLunchEnd">Lunch window ends</label>
              <input class="field-input" id="setLunchEnd" type="time" />
              <div class="field-help">End of carb+protein window.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setDinnerEnd">Dinner window ends</label>
              <input class="field-input" id="setDinnerEnd" type="time" />
              <div class="field-help">Start of late-night segment.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setSunrise">Sunrise</label>
              <input class="field-input" id="setSunrise" type="time" />
              <div class="field-help">Used for the sun arc + sky.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setSunset">Sunset</label>
              <input class="field-input" id="setSunset" type="time" />
              <div class="field-help">Used for the sun arc + sky.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setSunMode">Sun mode</label>
              <select class="field-input" id="setSunMode">
                <option value="manual">Manual</option>
                <option value="auto">Auto</option>
              </select>
              <div class="field-help">Auto uses on-device location when enabled.</div>
            </div>

            <div class="field">
              <label class="field-label" for="sunAutoBtn">Auto sunrise/sunset</label>
              <button class="btn ghost small" id="sunAutoBtn" type="button">Update from location</button>
              <div class="field-help" id="sunAutoStatus">Requires explicit permission; no network calls.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setPhase">Phase</label>
              <select class="field-input" id="setPhase">
                <option value="">‚Äî</option>
                <option value="strict">Strict</option>
                <option value="maintenance">Maintenance</option>
                <option value="advanced">Advanced</option>
              </select>
              <div class="field-help">Shown in the day header and Review.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setFocusMode">Timeline focus</label>
              <select class="field-input" id="setFocusMode">
                <option value="full">Full day</option>
                <option value="nowfade">Fade future</option>
              </select>
              <div class="field-help">Keeps the interface calm in the morning.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setWeekStart">Week starts</label>
              <select class="field-input" id="setWeekStart">
                <option value="0">Sunday</option>
                <option value="1">Monday</option>
              </select>
              <div class="field-help">Used for Weekly Review ranges.</div>
            </div>

            <div class="field">
              <label class="field-label" for="setSupplementsMode">Supplements mode</label>
              <select class="field-input" id="setSupplementsMode">
                <option value="none">Off</option>
                <option value="essential">Essential</option>
                <option value="advanced">Advanced</option>
              </select>
              <div class="field-help">Optional module; off by default.</div>
            </div>
          </div>

          <div class="danger-zone">
            <div class="danger-title">Danger Zone</div>
            <div class="row gap">
              <button class="btn" id="saveSettings" type="button">Save settings</button>
              <button class="btn ghost" id="resetToday" type="button">Reset today's logs</button>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="section-title">Sync</div>
          <div class="tiny muted">Hosted sync keeps your devices aligned. Local cache stays instant.</div>
          <div class="tiny muted" id="syncStatusLine">Status: ‚Äî</div>

          <div class="grid2 mt">
            <div class="field">
              <label class="field-label" for="syncLinkInput">Sync link</label>
              <input class="field-input" id="syncLinkInput" type="text" placeholder="Paste sync link here" />
              <div class="field-help" id="syncLinkStatus">No sync link configured.</div>
              <div class="row gap mt">
                <button class="btn" id="syncLinkApply" type="button">Use link</button>
                <button class="btn ghost" id="syncLinkCopy" type="button">Copy link</button>
              </div>
            </div>

            <div class="field">
              <label class="field-label" for="syncE2eeToggle">Encryption</label>
              <select class="field-input" id="syncE2eeToggle">
                <option value="none">None</option>
                <option value="e2ee">E2EE (passphrase)</option>
              </select>
              <div class="field-help">E2EE stores ciphertext only; passphrase never saved.</div>
            </div>

            <div class="field">
              <label class="field-label" for="syncMode">Sync mode</label>
              <select class="field-input" id="syncMode">
                <option value="hosted">Hosted (default)</option>
                <option value="off">Paused (local only)</option>
              </select>
              <div class="field-help">Pause disables background sync without deleting data.</div>
            </div>

            <div class="field">
              <label class="field-label" for="syncEndpoint">Endpoint override</label>
              <input class="field-input" id="syncEndpoint" type="text" placeholder="/api/sync/v1" />
              <div class="field-help">Optional; leave blank for the default endpoint.</div>
            </div>
          </div>

          <div class="row gap mt">
            <button class="btn ghost" id="syncNowBtn" type="button">Sync now</button>
            <button class="btn ghost" id="syncResetSpace" type="button">Reset sync space</button>
          </div>
        </div>

        <div class="panel">
          <div class="section-title">Rosters</div>
          <div class="tiny muted">Edit your default options. You can also add items inside a segment.</div>
          <div class="tiny muted">Tag hints: carb:starch, carb:fruit, carb:sugar, fat:dense, fat:seed_oil, fat:unknown.
          </div>

          <div class="roster-block">
            <div class="roster-head">
              <div class="roster-title">Proteins</div>
              <button class="btn tinybtn" data-roster="proteins" type="button">+ Add</button>
            </div>
            <div class="roster-list" id="roster-proteins"></div>
          </div>

          <div class="roster-block">
            <div class="roster-head">
              <div class="roster-title">Carbs</div>
              <button class="btn tinybtn" data-roster="carbs" type="button">+ Add</button>
            </div>
            <div class="roster-list" id="roster-carbs"></div>
          </div>

          <div class="roster-block">
            <div class="roster-head">
              <div class="roster-title">Fats</div>
              <button class="btn tinybtn" data-roster="fats" type="button">+ Add</button>
            </div>
            <div class="roster-list" id="roster-fats"></div>
          </div>

          <div class="roster-block">
            <div class="roster-head">
              <div class="roster-title">Accoutrements (u)</div>
              <button class="btn tinybtn" data-roster="micros" type="button">+ Add</button>
            </div>
            <div class="roster-list" id="roster-micros"></div>
          </div>

          <div class="roster-block" id="roster-supplements-block" hidden>
            <div class="roster-head">
              <div class="roster-title">Supplements</div>
              <button class="btn tinybtn" data-roster="supplements" type="button">+ Add</button>
            </div>
            <div class="roster-list" id="roster-supplements"></div>
          </div>
        </div>

        <div class="panel">
          <div class="section-title">Insights</div>
          <label class="check">
            <input type="checkbox" id="todayNudgeToggle" />
            Show a Today nudge card
          </label>
          <div class="tiny muted">At most one insight, off by default.</div>
        </div>

        <div class="panel">
          <div class="section-title">Privacy</div>
          <label class="check">
            <input type="checkbox" id="privacyAppLockToggle" />
            App lock (passcode)
          </label>
          <button class="btn ghost small" id="appLockSetBtn" type="button">Set passcode</button>
          <label class="check">
            <input type="checkbox" id="privacyBlurToggle" />
            Blur the app when backgrounded
          </label>
          <label class="check">
            <input type="checkbox" id="privacyRedactToggle" />
            Redact Today view notes and labels
          </label>
          <label class="check">
            <input type="checkbox" id="privacyEncryptedToggle" />
            Default to encrypted export
          </label>
          <div class="tiny muted">App lock gates access on launch; blur affects app switcher snapshots; redaction hides
            Today labels/notes; encrypted export asks for a passphrase.</div>
        </div>
      </section>

      <!-- DAY DETAIL (placeholder) -->
      <section class="view hidden" id="viewDay" data-view="day">
        <div class="panel">
          <div class="section-title">Day detail</div>
          <div class="tiny muted">Placeholder for vNext day detail route.</div>
        </div>
      </section>
    </main>

    <!-- Bottom Navigation Bar (mockup: ui/mockups/home.html) -->
    <nav class="bottom-nav" data-region="nav" aria-label="Primary">
      <button class="tab tab-active" id="tabToday" type="button" data-action="route" data-route="today">
        <svg class="tab-glyph" aria-hidden="true">
          <use href="#i-home"></use>
        </svg>
        <span class="tab-label">HOME</span>
      </button>
      <button class="tab" id="tabHistory" type="button" data-action="route" data-route="history">
        <svg class="tab-glyph" aria-hidden="true">
          <use href="#i-history"></use>
        </svg>
        <span class="tab-label">LOGS</span>
      </button>
      <button class="tab" id="tabReview" type="button" data-action="route" data-route="review">
        <svg class="tab-glyph" aria-hidden="true">
          <use href="#i-chart"></use>
        </svg>
        <span class="tab-label">STATS</span>
      </button>
      <button class="tab" id="tabSettings" type="button" data-action="route" data-route="settings">
        <svg class="tab-glyph" aria-hidden="true">
          <use href="#i-settings"></use>
        </svg>
        <span class="tab-label">CFG</span>
      </button>
    </nav>

    <div id="modalRoot" data-region="modals">
      <!-- SEGMENT SHEET (mockup: ui/mockups/segmenteditor.html) -->
      <div class="sheet hidden" id="sheet" aria-hidden="true">
        <div class="sheet-backdrop" id="sheetBackdrop" aria-hidden="true"></div>

        <div class="segment-sheet sheet-panel" role="dialog" aria-modal="true" aria-labelledby="sheetTitle">
          <div class="sheet-grip sheet-handle" aria-hidden="true">
            <span></span><span></span><span></span>
          </div>

          <header class="segment-header">
            <div class="segment-kicker">SEGMENT</div>
            <div class="segment-head-row">
              <div class="segment-head-left">
                <h2 class="segment-title" id="sheetTitle">‚Äî</h2>
                <div class="segment-sub" id="sheetSub">‚Äî</div>
              </div>
              <div class="segment-head-right">
                <div class="segment-window-label" id="sheetWindowLabel">WINDOW</div>
                <div class="segment-window-time" id="sheetWindowTime">‚Äî</div>
              </div>
              <button class="icon-btn close" id="closeSheet" type="button" aria-label="Close">√ó</button>
            </div>
            <div class="segment-progress" id="sheetProgress" aria-hidden="true">
              <span></span><span></span><span></span>
            </div>
          </header>

          <div class="segment-body">
            <div class="sheet-row hidden" id="ftnModeRow">
              <div class="row-label">FTN mode</div>
              <div class="segmented" data-segfield="ftnMode" id="ftnModeSeg">
                <button class="seg-btn" type="button" data-value="ftn">FTN</button>
                <button class="seg-btn" type="button" data-value="lite">Lite</button>
                <button class="seg-btn" type="button" data-value="off">Off</button>
              </div>
              <div class="tiny muted">Strict = fruit only. Lite = allows non-fat dairy/collagen/MCT.</div>
            </div>

            <section class="nutrient-section" data-nutrient="protein">
              <div class="nutrient-head">
                <div class="nutrient-title">
                  <span class="nutrient-icon" data-icon="protein" aria-hidden="true"></span>
                  <span>Protein</span>
                  <span class="nutrient-slash">//</span>
                  <span class="nutrient-sub">Anabolic</span>
                </div>
                <div class="nutrient-controls">
                  <span class="nutrient-code">SEC-01</span>
                  <button class="link" id="addProtein" type="button">+ add</button>
                </div>
              </div>
              <input class="chip-search" id="searchProteins" type="search" placeholder="Search proteins" />
              <div class="chips" id="chipsProteins"></div>
            </section>

            <section class="nutrient-section" data-nutrient="carb">
              <div class="nutrient-head">
                <div class="nutrient-title">
                  <span class="nutrient-icon" data-icon="carb" aria-hidden="true"></span>
                  <span>Carbs</span>
                  <span class="nutrient-slash">//</span>
                  <span class="nutrient-sub">Fuel</span>
                </div>
                <div class="nutrient-controls">
                  <span class="nutrient-code">SEC-02</span>
                  <button class="link" id="addCarb" type="button">+ add</button>
                </div>
              </div>
              <input class="chip-search" id="searchCarbs" type="search" placeholder="Search carbs" />
              <div class="chips" id="chipsCarbs"></div>
            </section>

            <section class="nutrient-section" data-nutrient="fat">
              <div class="nutrient-head">
                <div class="nutrient-title">
                  <span class="nutrient-icon" data-icon="fat" aria-hidden="true"></span>
                  <span>Fats</span>
                  <span class="nutrient-slash">//</span>
                  <span class="nutrient-sub">Hormonal</span>
                </div>
                <div class="nutrient-controls">
                  <span class="nutrient-code">SEC-03</span>
                  <button class="link" id="addFat" type="button">+ add</button>
                </div>
              </div>
              <input class="chip-search" id="searchFats" type="search" placeholder="Search fats" />
              <div class="chips" id="chipsFats"></div>
            </section>

            <section class="nutrient-section" data-nutrient="micro">
              <div class="nutrient-head">
                <div class="nutrient-title">
                  <span class="nutrient-icon" data-icon="micro" aria-hidden="true"></span>
                  <span>Accoutrements</span>
                  <span class="nutrient-slash">//</span>
                  <span class="nutrient-sub">Catalyst</span>
                </div>
                <div class="nutrient-controls">
                  <span class="nutrient-code">SEC-04</span>
                  <button class="link" id="addMicro" type="button">+ add</button>
                </div>
              </div>
              <input class="chip-search" id="searchMicros" type="search" placeholder="Search accoutrements" />
              <div class="chips" id="chipsMicros"></div>
            </section>
          </div>

          <footer class="segment-footer">
            <div class="flag-row">
              <div class="segmented small" id="segSeedOil" data-segfield="seedOil">
                <button class="seg-btn" type="button" data-value="">‚Äî</button>
                <button class="seg-btn" type="button" data-value="none">No seed oils</button>
                <button class="seg-btn" type="button" data-value="yes">Seed oils</button>
              </div>
              <div class="segmented small" id="segCollision" data-segfield="collision">
                <button class="seg-btn" type="button" data-value="auto">Collision auto</button>
                <button class="seg-btn" type="button" data-value="yes">Collision</button>
                <button class="seg-btn" type="button" data-value="no">No collision</button>
              </div>
              <div class="segmented small" id="segHighFat" data-segfield="highFatMeal">
                <button class="seg-btn" type="button" data-value="auto">High-fat auto</button>
                <button class="seg-btn" type="button" data-value="yes">High-fat</button>
                <button class="seg-btn" type="button" data-value="no">Not high-fat</button>
              </div>
            </div>
            <div class="flag-help tiny muted" id="flagHelp">Collision auto = fat:dense + carb:starch. High-fat auto =
              fat:dense.</div>

            <div class="status-row">
              <div class="row-label">Status</div>
              <div class="segmented small" id="segStatus" data-segfield="status">
                <button class="seg-btn" type="button" data-value="unlogged">Unlogged</button>
                <button class="seg-btn" type="button" data-value="none">None</button>
                <button class="seg-btn" type="button" data-value="logged">Logged</button>
              </div>
            </div>

            <div class="sheet-row">
              <label class="row-label" for="segNotes">Segment notes</label>
              <textarea class="notes-box" id="segNotes" placeholder="Optional. 1-2 lines."></textarea>
            </div>

            <div class="sheet-foot">
              <button class="btn ghost" id="clearSegment" type="button">Clear</button>
              <button class="btn" id="doneSegment" type="button">Log <span class="btn-arrow"
                  aria-hidden="true">‚Ä∫</span></button>
            </div>
          </footer>
        </div>
      </div>
    </div>

    <div id="toastRoot" data-region="toasts">
      <div class="update-toast" id="updateToast" hidden role="status" aria-live="polite">
        <span>Update available</span>
        <button class="btn small" id="updateReload" type="button">Update</button>
      </div>

      <div class="update-toast" id="undoToast" hidden role="status" aria-live="polite">
        <span id="undoLabel">Change saved</span>
        <button class="btn small" id="undoAction" type="button">Undo</button>
      </div>
    </div>
  </div>

  <script type="module" src="app/boot.js"></script>
</body>

</html>
